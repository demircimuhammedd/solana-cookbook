<!DOCTYPE html>
<html lang="fr-FR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.36">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="title" content="Solana Cookbook | Réessayer des Transactions"><meta name="og:title" content="Solana Cookbook | Réessayer des Transactions"><meta name="description" content="Il arrive parfois qu'une transaction apparemment valide soit rejetée avant d'être incluse dans un bloc. Pour remédier à ce problème, les développeurs d'applications peuvent mettre au point leur propre logique de retransmission personnalisée. Découvrez comment réessayer des transactions et bien d'autres choses encore dans le Solana cookbook."><meta name="og:description" content="Il arrive parfois qu'une transaction apparemment valide soit rejetée avant d'être incluse dans un bloc. Pour remédier à ce problème, les développeurs d'applications peuvent mettre au point leur propre logique de retransmission personnalisée. Découvrez comment réessayer des transactions et bien d'autres choses encore dans le Solana cookbook."><meta name="og:image" content="https://solanacookbook.com/cookbook-sharing-card.png"><meta name="og:image:alt" content="Solana splash card"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@solanacookbook"><meta name="twitter:image" content="https://solanacookbook.com/cookbook-sharing-card.png"><meta name="robots" content="index,follow,noodp"><meta name="googlebot" content="index,follow"><link rel="icon" href="/solana_cookbook_lightmode.svg"><script data-domain="solanacookbook.com" src="https://plausible.io/js/plausible.js"></script><title>Réessayer des Transactions | Solana Cookbook</title>
    <link rel="modulepreload" href="/assets/app.cfdf84e7.js"><link rel="modulepreload" href="/assets/retrying-transactions.html.259b8c70.js"><link rel="modulepreload" href="/assets/retrying-transactions.html.a91ac37c.js">
    <link rel="stylesheet" href="/assets/style.fecd2c41.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/fr/" class=""><!----><span class="site-name can-hide">Solana Cookbook</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/solana-developers/solana-cookbook" rel="noopener noreferrer" target="_blank" aria-label="Contribuer"><!--[--><!--]--> Contribuer <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/fr/integrations" class="" aria-label="Intégrations"><!--[--><!--]--> Intégrations <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guides/retrying-transactions.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/" class="" aria-label="中文"><!--[--><!--]--> 中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/es/guides/retrying-transactions.html" class="" aria-label="Spanish"><!--[--><!--]--> Spanish <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/de/guides/retrying-transactions.html" class="" aria-label="Deutsch"><!--[--><!--]--> Deutsch <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vi/guides/retrying-transactions.html" class="" aria-label="Tiếng Việt"><!--[--><!--]--> Tiếng Việt <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/th/guides/retrying-transactions.html" class="" aria-label="ไทย"><!--[--><!--]--> ไทย <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/fr/guides/retrying-transactions.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Français"><!--[--><!--]--> Français <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/id/guides/retrying-transactions.html" class="" aria-label="Bahasa Indonesia"><!--[--><!--]--> Bahasa Indonesia <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/kr/guides/retrying-transactions.html" class="" aria-label="한국어"><!--[--><!--]--> 한국어 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tr/guides/retrying-transactions.html" class="" aria-label="Türkçe"><!--[--><!--]--> Türkçe <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/solana-developers/solana-cookbook" rel="noopener noreferrer" target="_blank" aria-label="Contribuer"><!--[--><!--]--> Contribuer <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/fr/integrations" class="" aria-label="Intégrations"><!--[--><!--]--> Intégrations <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guides/retrying-transactions.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/" class="" aria-label="中文"><!--[--><!--]--> 中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/es/guides/retrying-transactions.html" class="" aria-label="Spanish"><!--[--><!--]--> Spanish <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/de/guides/retrying-transactions.html" class="" aria-label="Deutsch"><!--[--><!--]--> Deutsch <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vi/guides/retrying-transactions.html" class="" aria-label="Tiếng Việt"><!--[--><!--]--> Tiếng Việt <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/th/guides/retrying-transactions.html" class="" aria-label="ไทย"><!--[--><!--]--> ไทย <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/fr/guides/retrying-transactions.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Français"><!--[--><!--]--> Français <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/id/guides/retrying-transactions.html" class="" aria-label="Bahasa Indonesia"><!--[--><!--]--> Bahasa Indonesia <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/kr/guides/retrying-transactions.html" class="" aria-label="한국어"><!--[--><!--]--> 한국어 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tr/guides/retrying-transactions.html" class="" aria-label="Türkçe"><!--[--><!--]--> Türkçe <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Pour Commencer <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/fr/" class="sidebar-item" aria-label="Solana Cookbook"><!--[--><!--]--> Solana Cookbook <!--[--><!--]--></a><!----></li><li><a href="/fr/getting-started/installation.html" class="sidebar-item" aria-label="Installation"><!--[--><!--]--> Installation <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Concepts Fondamentaux <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/fr/core-concepts/accounts.html" class="sidebar-item" aria-label="Comptes"><!--[--><!--]--> Comptes <!--[--><!--]--></a><!----></li><li><a href="/fr/core-concepts/programs.html" class="sidebar-item" aria-label="Programmes"><!--[--><!--]--> Programmes <!--[--><!--]--></a><!----></li><li><a href="/fr/core-concepts/transactions.html" class="sidebar-item" aria-label="Transactions"><!--[--><!--]--> Transactions <!--[--><!--]--></a><!----></li><li><a href="/fr/core-concepts/pdas.html" class="sidebar-item" aria-label="Adresses dérivées de programmes (PDAs)"><!--[--><!--]--> Adresses dérivées de programmes (PDAs) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">Guides <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/fr/guides/get-program-accounts.html" class="sidebar-item" aria-label="Obtenir les comptes d&#39;un programme"><!--[--><!--]--> Obtenir les comptes d&#39;un programme <!--[--><!--]--></a><!----></li><li><a href="/fr/guides/serialization.html" class="sidebar-item" aria-label="Sérialisation des données"><!--[--><!--]--> Sérialisation des données <!--[--><!--]--></a><!----></li><li><a href="/fr/guides/data-migration.html" class="sidebar-item" aria-label="Migration des Comptes de Données de Programmes"><!--[--><!--]--> Migration des Comptes de Données de Programmes <!--[--><!--]--></a><!----></li><li><a href="/fr/guides/account-maps.html" class="sidebar-item" aria-label="Maps de Comptes"><!--[--><!--]--> Maps de Comptes <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/fr/guides/retrying-transactions.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Réessayer des Transactions"><!--[--><!--]--> Réessayer des Transactions <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/fr/guides/retrying-transactions.html#faits" class="router-link-active router-link-exact-active sidebar-item" aria-label="Faits"><!--[--><!--]--> Faits <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/fr/guides/retrying-transactions.html#le-voyage-d-une-transaction" class="router-link-active router-link-exact-active sidebar-item" aria-label="Le Voyage d&#39;une Transaction"><!--[--><!--]--> Le Voyage d&#39;une Transaction <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/fr/guides/retrying-transactions.html#comment-les-clients-soumettent-les-transactions" class="router-link-active router-link-exact-active sidebar-item" aria-label="Comment Les Clients Soumettent Les Transactions"><!--[--><!--]--> Comment Les Clients Soumettent Les Transactions <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/fr/guides/retrying-transactions.html#comment-les-nœuds-rpc-transmettent-les-transactions" class="router-link-active router-link-exact-active sidebar-item" aria-label="Comment Les Nœuds RPC Transmettent Les Transactions"><!--[--><!--]--> Comment Les Nœuds RPC Transmettent Les Transactions <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/fr/guides/retrying-transactions.html#comment-les-transactions-sont-rejetees" class="router-link-active router-link-exact-active sidebar-item" aria-label="Comment Les Transactions Sont Rejetées"><!--[--><!--]--> Comment Les Transactions Sont Rejetées <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/fr/guides/retrying-transactions.html#avant-le-traitement-d-une-transaction" class="router-link-active router-link-exact-active sidebar-item" aria-label="Avant le traitement d&#39;une transaction"><!--[--><!--]--> Avant le traitement d&#39;une transaction <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/fr/guides/retrying-transactions.html#apres-le-traitement-d-une-transaction-et-avant-sa-finalisation" class="router-link-active router-link-exact-active sidebar-item" aria-label="Après le traitement d&#39;une transaction et avant sa finalisation"><!--[--><!--]--> Après le traitement d&#39;une transaction et avant sa finalisation <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/fr/guides/retrying-transactions.html#traitement-des-transactions-rejetees" class="router-link-active router-link-exact-active sidebar-item" aria-label="Traitement Des Transactions Rejetées"><!--[--><!--]--> Traitement Des Transactions Rejetées <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/fr/guides/retrying-transactions.html#un-examen-approfondi-de-sendtransaction" class="router-link-active router-link-exact-active sidebar-item" aria-label="Un Examen Approfondi De sendTransaction"><!--[--><!--]--> Un Examen Approfondi De sendTransaction <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/fr/guides/retrying-transactions.html#personnalisation-de-la-logique-de-retransmission" class="router-link-active router-link-exact-active sidebar-item" aria-label="Personnalisation De La logique De Retransmission"><!--[--><!--]--> Personnalisation De La logique De Retransmission <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/fr/guides/retrying-transactions.html#le-cout-de-l-omission-du-controle-prealable" class="router-link-active router-link-exact-active sidebar-item" aria-label="Le Coût de l&#39;Omission Du Contrôle Préalable"><!--[--><!--]--> Le Coût de l&#39;Omission Du Contrôle Préalable <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/fr/guides/retrying-transactions.html#quand-re-signer-des-transactions" class="router-link-active router-link-exact-active sidebar-item" aria-label="Quand Re-Signer Des Transactions"><!--[--><!--]--> Quand Re-Signer Des Transactions <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/fr/guides/retrying-transactions.html#remerciements" class="router-link-active router-link-exact-active sidebar-item" aria-label="Remerciements"><!--[--><!--]--> Remerciements <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/fr/guides/debugging-solana-programs.html" class="sidebar-item" aria-label="Débogage des Programmes Solana"><!--[--><!--]--> Débogage des Programmes Solana <!--[--><!--]--></a><!----></li><li><a href="/fr/guides/feature-parity-testing.html" class="sidebar-item" aria-label="Test de Conformité des Fonctionnalités"><!--[--><!--]--> Test de Conformité des Fonctionnalités <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Références <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/fr/references/local-development.html" class="sidebar-item" aria-label="Développement Local"><!--[--><!--]--> Développement Local <!--[--><!--]--></a><!----></li><li><a href="/fr/references/keypairs-and-wallets.html" class="sidebar-item" aria-label="Paires de Clés et Portefeuilles"><!--[--><!--]--> Paires de Clés et Portefeuilles <!--[--><!--]--></a><!----></li><li><a href="/fr/references/basic-transactions.html" class="sidebar-item" aria-label="Envoyer des Transactions"><!--[--><!--]--> Envoyer des Transactions <!--[--><!--]--></a><!----></li><li><a href="/fr/references/accounts.html" class="sidebar-item" aria-label="Comptes"><!--[--><!--]--> Comptes <!--[--><!--]--></a><!----></li><li><a href="/fr/references/programs.html" class="sidebar-item" aria-label="Écrire des Programmes"><!--[--><!--]--> Écrire des Programmes <!--[--><!--]--></a><!----></li><li><a href="/fr/references/token.html" class="sidebar-item" aria-label="Interaction avec les Jetons"><!--[--><!--]--> Interaction avec les Jetons <!--[--><!--]--></a><!----></li><li><a href="/fr/references/staking.html" class="sidebar-item" aria-label="Staking"><!--[--><!--]--> Staking <!--[--><!--]--></a><!----></li><li><a href="/fr/references/nfts.html" class="sidebar-item" aria-label="NFTs"><!--[--><!--]--> NFTs <!--[--><!--]--></a><!----></li><li><a href="/fr/references/offline-transactions.html" class="sidebar-item" aria-label="Envoi de transactions hors connexion"><!--[--><!--]--> Envoi de transactions hors connexion <!--[--><!--]--></a><!----></li><li><a href="/fr/references/name-service.html" class="sidebar-item" aria-label="Service de Noms"><!--[--><!--]--> Service de Noms <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="reessayer-des-transactions" tabindex="-1"><a class="header-anchor" href="#reessayer-des-transactions" aria-hidden="true">#</a> Réessayer Des Transactions</h1><p>Il arrive parfois qu&#39;une transaction apparemment valide soit rejetée avant d&#39;être incluse dans un bloc. Cela se produit le plus souvent pendant les périodes de congestion du réseau, lorsqu&#39;un nœud RPC ne parvient pas à retransmettre la transaction au <a href="https://docs.solana.com/terminology#leader" target="_blank" rel="noopener noreferrer">leader<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>. Pour l&#39;utilisateur final, il peut avoir l&#39;impression que sa transaction disparaît complètement. Si les nœuds RPC sont équipés d&#39;un algorithme de retransmission générique, les développeurs d&#39;applications sont également capables de développer leur propre logique de retransmission personnalisée.</p><h2 id="faits" tabindex="-1"><a class="header-anchor" href="#faits" aria-hidden="true">#</a> Faits</h2><div class="custom-container tip"><p class="custom-container-title">Fiche d&#39;Information</p><ul><li>Les nœuds RPC tenteront de retransmettre les transactions en utilisant un algorithme générique</li><li>ALes développeurs d&#39;applications peuvent mettre en œuvre leur propre logique de retransmission personnalisée</li><li>Les développeurs devraient tirer parti du paramètre <code>maxRetries</code> de la méthode JSON-RPC <code>sendTransaction</code></li><li>Les développeurs devraient activer des contrôles en amont afin de détecter les erreurs avant que les transactions ne soient soumises</li><li>Avant de re-signer une transaction, il est <strong>très important</strong> de s&#39;assurer que le blockhash de la transaction initiale a expiré</li></ul></div><h2 id="le-voyage-d-une-transaction" tabindex="-1"><a class="header-anchor" href="#le-voyage-d-une-transaction" aria-hidden="true">#</a> Le Voyage d&#39;une Transaction</h2><h3 id="comment-les-clients-soumettent-les-transactions" tabindex="-1"><a class="header-anchor" href="#comment-les-clients-soumettent-les-transactions" aria-hidden="true">#</a> Comment Les Clients Soumettent Les Transactions</h3><p>Chez Solana, il n&#39;y a pas de concept de mempool.Toutes les transactions, qu&#39;elles soient initiées par un programme ou par un utilisateur final, sont acheminées efficacement vers les leaders afin d&#39;être traitées dans un bloc. Il existe deux manières principales d&#39;envoyer une transaction aux leaders :</p><ol><li>Par proxy via un serveur RPC et la méthode JSON-RPC <a href="https://docs.solana.com/developing/clients/jsonrpc-api#sendtransaction" target="_blank" rel="noopener noreferrer">sendTransaction<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>Directement aux leaders via un <a href="https://docs.rs/solana-client/1.7.3/solana_client/tpu_client/index.html" target="_blank" rel="noopener noreferrer">Client TPU<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ol><p>La grande majorité des utilisateurs finaux soumettront des transactions via un serveur RPC. Lorsqu&#39;un client soumet une transaction, le nœud RPC récepteur tente à son tour de transmettre la transaction aux leaders actuels et suivants. Tant que la transaction n&#39;est pas traitée par un leader, il n&#39;y a pas d&#39;enregistrement de la transaction en dehors de ce dont le client et les nœuds RPC relais ont connaissance. Dans le cas d&#39;un client TPU, la retransmission et le transfert des leaders sont entièrement gérés par le logiciel client.</p><p><img src="/assets/tx-journey.dd6310be.png" alt="Transaction Journey"></p><h3 id="comment-les-nœuds-rpc-transmettent-les-transactions" tabindex="-1"><a class="header-anchor" href="#comment-les-nœuds-rpc-transmettent-les-transactions" aria-hidden="true">#</a> Comment Les Nœuds RPC Transmettent Les Transactions</h3><p>Lorsqu&#39;un nœud RPC reçoit une transaction via <code>sendTransaction</code>, il la convertit en un paquet <a href="https://en.wikipedia.org/wiki/User_Datagram_Protocol" target="_blank" rel="noopener noreferrer">UDP<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> avant de la transmettre aux leaders concernés. UDP permet aux validateurs de communiquer rapidement entre eux, mais ne fournit aucune garantie quant à la livraison des transactions.</p><p>Comme le calendrier des leaders de Solana est connu à l&#39;avance pour chaque <a href="https://docs.solana.com/terminology#epoch" target="_blank" rel="noopener noreferrer">epoque<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> (~2 jours), un noeud RPC diffusera sa transaction directement aux leaders actuels et suivants. Cela contraste avec d&#39;autres protocoles de bavardage, comme Ethereum, qui propagent les transactions de manière aléatoire et à grande échelle sur l&#39;ensemble du réseau. Par défaut, les nœuds RPC essaient de transmettre les transactions aux leaders toutes les deux secondes jusqu&#39;à ce que la transaction soit finalisée ou que le hash de blocs de la transaction expire (150 blocs ou ~1 minute 19 secondes au moment de la rédaction de ce document). Si la taille de la file d&#39;attente de retransmissions en attente est supérieure à <a href="https://github.com/solana-labs/solana/blob/bfbbc53dac93b3a5c6be9b4b65f679fdb13e41d9/send-transaction-service/src/send_transaction_service.rs#L20" target="_blank" rel="noopener noreferrer">10,000 transactions<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> les nouvelles transactions soumises sont rejetées. Il existe des <a href="https://github.com/solana-labs/solana/blob/bfbbc53dac93b3a5c6be9b4b65f679fdb13e41d9/validator/src/main.rs#L1172" target="_blank" rel="noopener noreferrer">arguments<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> de ligne de commande que les opérateurs RPC peuvent ajuster pour modifier le comportement par défaut de cette logique de réessai.</p><p>Lorsqu&#39;un nœud RPC transmet une transaction, il tente de la transmettre à l&#39;<a href="https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/validator.rs#L867" target="_blank" rel="noopener noreferrer">Unité de Traitement des Transactions (Transaction Processing Unit ou TPU)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> d&#39;un leader. Le TPU traite les transactions en cinq phases distinctes :</p><ul><li><a href="https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/fetch_stage.rs#L21" target="_blank" rel="noopener noreferrer">Étape de Récupération (Fetch Stage)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/tpu.rs#L91" target="_blank" rel="noopener noreferrer">Étape de SigVerify (SigVerify Stage)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/banking_stage.rs#L249" target="_blank" rel="noopener noreferrer">Étape de Banking (Banking Stage)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/poh/src/poh_service.rs" target="_blank" rel="noopener noreferrer">Service Proof of History<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/tpu.rs#L136" target="_blank" rel="noopener noreferrer">Étape de Transmission (Broadcast Stage)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><p><img src="/assets/tpu-jito-labs.8bb32fb6.png" alt="TPU Overview"><small style="display:block;text-align:center;">Avec l&#39;Autorisation de Jito Labs</small></p><p>Parmi ces cinq phases, l&#39;étape Fetch est responsable de la réception des transactions. Dans celle-ci, les validateurs classeront les transactions entrantes en fonction de trois ports :</p><ul><li><a href="https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/gossip/src/contact_info.rs#L27" target="_blank" rel="noopener noreferrer">tpu<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> gère les transactions régulières telles que les transferts de jetons, les mints de NFT et les instructions de programme</li><li><a href="https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/gossip/src/contact_info.rs#L31" target="_blank" rel="noopener noreferrer">tpu_vote<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> se concentre exclusivement sur les transactions de vote</li><li><a href="https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/gossip/src/contact_info.rs#L29" target="_blank" rel="noopener noreferrer">tpu_forwards<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> transmet les paquets non traités au leader suivant si le leader actuel est incapable de traiter toutes les transactions.</li></ul><p>Pour plus d&#39;informations sur le TPU, veuillez consulter <a href="https://jito-labs.medium.com/solana-validator-101-transaction-processing-90bcdc271143" target="_blank" rel="noopener noreferrer">cet excellent article de Jito Labs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><h2 id="comment-les-transactions-sont-rejetees" tabindex="-1"><a class="header-anchor" href="#comment-les-transactions-sont-rejetees" aria-hidden="true">#</a> Comment Les Transactions Sont Rejetées</h2><p>Tout au long du voyage d&#39;une transaction, il existe quelques scénarios dans lesquels la transaction peut être involontairement rejetée du réseau.</p><h3 id="avant-le-traitement-d-une-transaction" tabindex="-1"><a class="header-anchor" href="#avant-le-traitement-d-une-transaction" aria-hidden="true">#</a> Avant le traitement d&#39;une transaction</h3><p>Si le réseau rejette une transaction, il le fera très probablement avant que la transaction ne soit traitée par un leader. La <a href="https://en.wikipedia.org/wiki/Packet_loss" target="_blank" rel="noopener noreferrer">perte de paquets<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> UDP est la raison la plus simple pour laquelle cela peut se produire. En période de charge intense du réseau, il est également possible que les validateurs soient submergés par le nombre de transactions à traiter. Bien que les validateurs soient équipés pour transmettre les transactions excédentaires via <code>tpu_forwards</code>, il y a une limite à la quantité de données qui peuvent être <a href="https://github.com/solana-labs/solana/blob/master/core/src/banking_stage.rs#L389" target="_blank" rel="noopener noreferrer">transmises<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>. De plus, chaque transfert est limité à un seul saut entre les validateurs. En d&#39;autres termes, les transactions reçues sur le port <code>tpu_forwards</code> ne sont pas transmises à d&#39;autres validateurs.</p><p>Il existe également deux raisons moins connues pour lesquelles une transaction peut être rejetée avant d&#39;être traitée. Le premier scénario implique des transactions qui sont soumises via un pool RPC. Il arrive qu&#39;une partie de la pool RPC soit suffisamment en avance sur le reste de la pool. Cela peut poser des problèmes lorsque les nœuds de la pool doivent travailler ensemble. Dans cet exemple, le <a href="https://docs.solana.com/developing/programming-model/transactions#recent-blockhash" target="_blank" rel="noopener noreferrer">recentBlockhash<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> de la transaction est interrogé à partir de la partie avancée de la pool (Backend A). Lorsque la transaction est soumise à la partie en retard de la pool (Backend B), les nœuds ne reconnaîtront pas le blockhash avancé et rejetteront la transaction. Cela peut être détecté lors de la soumission de la transaction si les développeurs activent les <a href="https://docs.solana.com/developing/clients/jsonrpc-api#sendtransaction" target="_blank" rel="noopener noreferrer">contrôles préalables (preflight checks)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> de <code>sendTransaction</code>.</p><p><img src="/assets/dropped-via-rpc-pool.8d1ce9af.png" alt="Dropped via RPC Pool"></p><p>Les forks temporaires du réseau peuvent également entraîner le rejet de transactions. Si un validateur est lent à rejouer ses blocs pendant l&#39;Étape de Banking, il peut finir par créer un fork minoritaire. Quand un client crée une transaction, il est possible que la transaction fasse référence à un <code>recentBlockhash</code> qui n&#39;existe que sur le fork minoritaire. Après la soumission de la transaction, le cluster peut alors se détacher de son fork minoritaire avant que la transaction ne soit traitée. Dans ce scénario, la transaction est rejetée parce que le blockhash n&#39;a pas été trouvé.</p><p><img src="/assets/dropped-minority-fork-pre-process.555653e1.png" alt="Dropped due to Minority Fork (Before Processed)"></p><h3 id="apres-le-traitement-d-une-transaction-et-avant-sa-finalisation" tabindex="-1"><a class="header-anchor" href="#apres-le-traitement-d-une-transaction-et-avant-sa-finalisation" aria-hidden="true">#</a> Après le traitement d&#39;une transaction et avant sa finalisation</h3><p>Dans le cas où une transaction fait référence à un <code>recentBlockhash</code> d&#39;un fork minoritaire, il est toujours possible que la transaction soit traitée. Dans ce cas, cependant, il serait traité par le leader du fork minoritaire. Lorsque ce leader tente de partager ses transactions traitées avec le reste du réseau, il ne parvient pas à obtenir un consensus avec la majorité des validateurs qui ne reconnaissent pas le fork minoritaire. A ce stade, la transaction serait rejetée avant d&#39;être finalisée.</p><p><img src="/assets/dropped-minority-fork-post-process.48c3c955.png" alt="Dropped due to Minority Fork (After Processed)"></p><h2 id="traitement-des-transactions-rejetees" tabindex="-1"><a class="header-anchor" href="#traitement-des-transactions-rejetees" aria-hidden="true">#</a> Traitement Des Transactions Rejetées</h2><p>Bien que les nœuds RPC tentent de retransmettre les transactions, l&#39;algorithme qu&#39;ils utilisent est générique et souvent mal adapté aux besoins des applications spécifiques. Pour se préparer aux périodes de congestion du réseau, les développeurs d&#39;applications doivent personnaliser leur propre logique de retransmission.</p><h3 id="un-examen-approfondi-de-sendtransaction" tabindex="-1"><a class="header-anchor" href="#un-examen-approfondi-de-sendtransaction" aria-hidden="true">#</a> Un Examen Approfondi De sendTransaction</h3><p>Lorsqu&#39;il s&#39;agit de soumettre des transactions, la méthode RPC <code>sendTransaction</code> est le principal outil à la disposition des développeurs. <code>sendTransaction</code> est seulement chargé de relayer une transaction d&#39;un client vers un noeud RPC. Si le noeud reçoit la transaction, <code>sendTransaction</code> retournera l&#39;identifiant de la transaction qui peut être utilisé pour suivre la transaction. Une réponse positive n&#39;indique pas si la transaction sera traitée ou finalisée par le cluster.</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><h4 id="parametres-de-la-requete" tabindex="-1"><a class="header-anchor" href="#parametres-de-la-requete" aria-hidden="true">#</a> Paramètres De La Requête</h4><ul><li><code>transaction</code>: <code>string</code> - Transaction entièrement signée, sous forme de chaîne de caractères codée</li><li>(facultatif) <code>configuration object</code>: <code>object</code><ul><li><code>skipPreflight</code>: <code>boolean</code> - si <em>true</em>, ignore les contrôles préalables de la transaction (par défaut : <em>false</em>)</li><li>(facultatif) <code>preflightCommitment</code>: <code>string</code> - <a href="https://docs.solana.com/developing/clients/jsonrpc-api#configuring-state-commitment" target="_blank" rel="noopener noreferrer">Commitment<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> Niveau à utiliser pour les simulations préalables par rapport au slot bank (par défaut : <em>&quot;finalized&quot;</em>).</li><li>(facultatif) <code>encoding</code>: <code>string</code> - Encodage utilisé pour les données de la transaction. Soit &quot;base58&quot; (lent), soit &quot;base64&quot;. (par défaut : &quot;base58&quot;).</li><li>(facultatif) <code>maxRetries</code>: <code>usize</code> - Nombre maximal de fois où le nœud RPC doit réessayer d&#39;envoyer la transaction au leader. Si ce paramètre n&#39;est pas fourni, le nœud RPC réessayera la transaction jusqu&#39;à ce qu&#39;elle soit finalisée ou jusqu&#39;à ce que le blockhash expire.</li></ul></li></ul><h4 id="reponse" tabindex="-1"><a class="header-anchor" href="#reponse" aria-hidden="true">#</a> Réponse</h4><ul><li><code>transaction id</code>: <code>string</code> - Première signature de transaction incorporée dans la transaction, sous forme de chaîne de caractères codée en base-58. Cet identifiant de transaction peut être utilisé avec <a href="https://docs.solana.com/developing/clients/jsonrpc-api#getsignaturestatuses" target="_blank" rel="noopener noreferrer">getSignatureStatuses<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> pour demander des mises à jour de statut.</li></ul></div><h2 id="personnalisation-de-la-logique-de-retransmission" tabindex="-1"><a class="header-anchor" href="#personnalisation-de-la-logique-de-retransmission" aria-hidden="true">#</a> Personnalisation De La logique De Retransmission</h2><p>Afin de développer leur propre logique de retransmission, les développeurs doivent tirer parti du paramètre <code>maxRetries</code> de <code>sendTransaction</code>. S&#39;il est fourni, <code>maxRetries</code> remplacera la logique de ré-essai par défaut d&#39;un nœud RPC, permettant aux développeurs de contrôler manuellement le processus de ré-essai <a href="https://github.com/solana-labs/solana/blob/98707baec2385a4f7114d2167ef6dfb1406f954f/validator/src/main.rs#L1258-L1274" target="_blank" rel="noopener noreferrer">dans des limites raisonnables<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><p>Un schéma courant pour réessayer manuellement les transactions implique le stockage temporaire de <code>lastValidBlockHeight</code> qui provient de <a href="https://docs.solana.com/developing/clients/jsonrpc-api#getlatestblockhash" target="_blank" rel="noopener noreferrer">getLatestBlockhash<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>. Une fois stockée, une application peut alors <a href="https://docs.solana.com/developing/clients/jsonrpc-api#getblockheight" target="_blank" rel="noopener noreferrer">interroger la hauteur de bloc du cluster (cluster’s blockheight)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> et réessayer manuellement la transaction à un moment approprié. En cas de congestion du réseau, il est avantageux de mettre <code>maxRetries</code> à 0 et de retransmettre manuellement via un algorithme personnalisé. Alors que certaines applications peuvent utiliser un algorithme de <a href="https://en.wikipedia.org/wiki/Exponential_backoff" target="_blank" rel="noopener noreferrer">backoff exponentiel<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, d&#39;autres, comme [Mango],(https://www.mango.markets/) choisissent de <a href="https://github.com/blockworks-foundation/mango-ui/blob/b6abfc6c13b71fc17ebbe766f50b8215fa1ec54f/src/utils/send.tsx#L713" target="_blank" rel="noopener noreferrer">resoumettre continuellement<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> les transactions à un intervalle constant jusqu&#39;à ce qu&#39;un certain délai se soit écoulé.</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><!--[--><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">TS</button></li><!--]--><li class="flex-grow"></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg></button></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></button></li></ul></div><div><div class="code-info-title">Press &lt;/&gt; button to view full source</div></div><!--[--><div class="code-group-item code-group-item__active" aria-selected="true" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  Keypair<span class="token punctuation">,</span>
  Connection<span class="token punctuation">,</span>
  <span class="token constant">LAMPORTS_PER_SOL</span><span class="token punctuation">,</span>
  SystemProgram<span class="token punctuation">,</span>
  Transaction<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@solana/web3.js&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> nacl <span class="token keyword">from</span> <span class="token string">&quot;tweetnacl&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">sleep</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ms<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> ms<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> payer <span class="token operator">=</span> Keypair<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> toAccount <span class="token operator">=</span> Keypair<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>publicKey<span class="token punctuation">;</span>

  <span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connection</span><span class="token punctuation">(</span><span class="token string">&quot;http://127.0.0.1:8899&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;confirmed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> airdropSignature <span class="token operator">=</span> <span class="token keyword">await</span> connection<span class="token punctuation">.</span><span class="token function">requestAirdrop</span><span class="token punctuation">(</span>
    payer<span class="token punctuation">.</span>publicKey<span class="token punctuation">,</span>
    <span class="token constant">LAMPORTS_PER_SOL</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> connection<span class="token punctuation">.</span><span class="token function">confirmTransaction</span><span class="token punctuation">(</span>airdropSignature<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> blockhashResponse <span class="token operator">=</span> <span class="token keyword">await</span> connection<span class="token punctuation">.</span><span class="token function">getLatestBlockhashAndContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> lastValidBlockHeight <span class="token operator">=</span> blockhashResponse<span class="token punctuation">.</span>context<span class="token punctuation">.</span>slot <span class="token operator">+</span> <span class="token number">150</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> transaction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Transaction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    feePayer<span class="token operator">:</span> payer<span class="token punctuation">.</span>publicKey<span class="token punctuation">,</span>
    blockhash<span class="token operator">:</span> blockhashResponse<span class="token punctuation">.</span>value<span class="token punctuation">.</span>blockhash<span class="token punctuation">,</span>
    lastValidBlockHeight<span class="token operator">:</span> lastValidBlockHeight<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
    SystemProgram<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      fromPubkey<span class="token operator">:</span> payer<span class="token punctuation">.</span>publicKey<span class="token punctuation">,</span>
      toPubkey<span class="token operator">:</span> toAccount<span class="token punctuation">,</span>
      lamports<span class="token operator">:</span> <span class="token number">1000000</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> message <span class="token operator">=</span> transaction<span class="token punctuation">.</span><span class="token function">serializeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> signature <span class="token operator">=</span> nacl<span class="token punctuation">.</span>sign<span class="token punctuation">.</span><span class="token function">detached</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> payer<span class="token punctuation">.</span>secretKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
  transaction<span class="token punctuation">.</span><span class="token function">addSignature</span><span class="token punctuation">(</span>payer<span class="token punctuation">.</span>publicKey<span class="token punctuation">,</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>signature<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> rawTransaction <span class="token operator">=</span> transaction<span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> blockheight <span class="token operator">=</span> <span class="token keyword">await</span> connection<span class="token punctuation">.</span><span class="token function">getBlockHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span>blockheight <span class="token operator">&lt;</span> lastValidBlockHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    connection<span class="token punctuation">.</span><span class="token function">sendRawTransaction</span><span class="token punctuation">(</span>rawTransaction<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      skipPreflight<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    blockheight <span class="token operator">=</span> <span class="token keyword">await</span> connection<span class="token punctuation">.</span><span class="token function">getBlockHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">while</span> <span class="token punctuation">(</span>blockheight <span class="token operator">&lt;</span> lastValidBlockHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  connection<span class="token punctuation">.</span><span class="token function">sendRawTransaction</span><span class="token punctuation">(</span>rawTransaction<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    skipPreflight<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  blockheight <span class="token operator">=</span> <span class="token keyword">await</span> connection<span class="token punctuation">.</span><span class="token function">getBlockHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><!--]--></div></div><!--]--></div><p>Lors de l&#39;interrogation via <code>getLatestBlockhash</code>, les applications doivent spécifier leur niveau d&#39;<a href="https://docs.solana.com/developing/clients/jsonrpc-api#configuring-state-commitment" target="_blank" rel="noopener noreferrer">engagement (commitment)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> prévu. En définissant son engagement sur <code>confirmed</code> (voté) ou <code>finalized</code> (~30 blocs après <code>confirmed</code>), une application peut éviter d&#39;interroger un blockhash d&#39;un fork minoritaire.</p><p>Si une application a accès aux nœuds RPC derrière un équilibreur de charge, elle peut également choisir de répartir sa charge de travail entre des nœuds spécifiques. Les nœuds RPC qui servent des requêtes à forte intensité de données telles que <a href="/fr/guides/get-program-accounts.html" class="">getProgramAccounts</a> peuvent être enclins à prendre du retard et ne sont pas adaptés à la transmission des transactions. Pour les applications qui gèrent des transactions sensibles au temps, il peut être prudent d&#39;avoir des noeuds dédiés qui ne gèrent que <code>sendTransaction</code>.</p><h3 id="le-cout-de-l-omission-du-controle-prealable" tabindex="-1"><a class="header-anchor" href="#le-cout-de-l-omission-du-controle-prealable" aria-hidden="true">#</a> Le Coût de l&#39;Omission Du Contrôle Préalable</h3><p>Par défaut, <code>sendTransaction</code> effectue trois contrôles préalables avant de soumettre une transaction. Plus précisément, <code>sendTransaction</code> va :</p><ul><li>Vérifier que toutes les signatures sont valides</li><li>Vérifier que le blockhash référencé se situe dans les 150 derniers blocs.</li><li>Simuler la transaction sur le slot bank spécifié par le <code>preflightCommitment</code></li></ul><p>Si l&#39;un de ces trois contrôles préalables échoue, <code>sendTransaction</code> déclenchera une erreur avant de soumettre la transaction. Les contrôles préalables peuvent souvent faire la différence entre le rejet d&#39;une transaction et la possibilité pour un client de gérer gracieusement une erreur. Pour s&#39;assurer que ces erreurs courantes sont prises en compte, il est recommandé aux développeurs de laisser la valeur <code>skipPreflight</code> sur <code>false</code>.</p><h3 id="quand-re-signer-des-transactions" tabindex="-1"><a class="header-anchor" href="#quand-re-signer-des-transactions" aria-hidden="true">#</a> Quand Re-Signer Des Transactions</h3><p>Malgré toutes les tentatives de retransmission, il peut arriver qu&#39;un client soit obligé de re-signer une transaction. Avant de resigner une transaction, il est <strong>très important</strong> de s&#39;assurer que le blockhash de la transaction initiale a expiré. Si le blockhash initial est toujours valide, il est possible que les deux transactions soient acceptées par le réseau. Pour un utilisateur final, cela donnerait l&#39;impression qu&#39;il a involontairement envoyé deux fois la même transaction.</p><p>Sur Solana, une transaction rejetée peut être éliminée en toute sécurité lorsque le blockhash qu&#39;elle référence est plus ancien que le <code>lastValidBlockHeight</code> reçu de <code>getLatestBlockhash</code>. Les développeurs doivent garder la trace de ce <code>lastValidBlockHeight</code> en interrogeant <a href="https://docs.solana.com/developing/clients/jsonrpc-api#getepochinfo" target="_blank" rel="noopener noreferrer"><code>getEpochInfo</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> et en le comparant avec <code>blockHeight</code> de la réponse. Une fois qu&#39;un blockhash est invalidé, les clients peuvent resigner avec un nouveau blockhash.</p><h2 id="remerciements" tabindex="-1"><a class="header-anchor" href="#remerciements" aria-hidden="true">#</a> Remerciements</h2><p>Un grand merci à Trent Nelson, <a href="https://twitter.com/jacobvcreech" target="_blank" rel="noopener noreferrer">Jacob Creech<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, White Tiger, Le Yafo, <a href="https://twitter.com/buffalu__" target="_blank" rel="noopener noreferrer">Buffalu<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, and <a href="https://twitter.com/jito_labs" target="_blank" rel="noopener noreferrer">Jito Labs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> pour leur examen et leurs commentaires.</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/fr/guides/account-maps.html" class="" aria-label="Maps de Comptes"><!--[--><!--]--> Maps de Comptes <!--[--><!--]--></a></span><span class="next"><a href="/fr/guides/debugging-solana-programs.html" class="" aria-label="Débogage des Programmes Solana"><!--[--><!--]--> Débogage des Programmes Solana <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.cfdf84e7.js" defer></script>
  </body>
</html>
